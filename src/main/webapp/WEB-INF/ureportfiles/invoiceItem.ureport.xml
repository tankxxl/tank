<?xml version="1.0" encoding="UTF-8"?><ureport><cell expand="None" name="A1" row="1" col="1"><cell-style font-size="12" forecolor="0,0,0" font-family="宋体" bgcolor="204,204,204" bold="false" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><simple-value><![CDATA[项目]]></simple-value></cell><cell expand="None" name="B1" row="1" col="2"><cell-style font-size="12" forecolor="0,0,0" font-family="宋体" bgcolor="204,204,204" bold="false" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><simple-value><![CDATA[合同号]]></simple-value></cell><cell expand="None" name="C1" row="1" col="3"><cell-style font-size="12" forecolor="0,0,0" font-family="宋体" bgcolor="204,204,204" bold="false" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><simple-value><![CDATA[部门]]></simple-value></cell><cell expand="None" name="D1" row="1" col="4"><cell-style font-size="12" forecolor="0,0,0" font-family="宋体" bgcolor="204,204,204" bold="false" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><simple-value><![CDATA[开票日期]]></simple-value></cell><cell expand="None" name="E1" row="1" col="5"><cell-style font-size="12" forecolor="0,0,0" font-family="宋体" bgcolor="204,204,204" bold="false" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><simple-value><![CDATA[发票号]]></simple-value></cell><cell expand="None" name="F1" row="1" col="6"><cell-style font-size="12" forecolor="0,0,0" font-family="宋体" bgcolor="204,204,204" bold="false" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><simple-value><![CDATA[开票名称]]></simple-value></cell><cell expand="None" name="G1" row="1" col="7"><cell-style font-size="12" forecolor="0,0,0" font-family="宋体" bgcolor="204,204,204" bold="false" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><simple-value><![CDATA[开票内容]]></simple-value></cell><cell expand="None" name="H1" row="1" col="8"><cell-style font-size="12" forecolor="0,0,0" font-family="宋体" bgcolor="204,204,204" bold="false" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><simple-value><![CDATA[含税金额]]></simple-value></cell><cell expand="None" name="I1" row="1" col="9"><cell-style font-size="12" forecolor="0,0,0" font-family="宋体" bgcolor="204,204,204" bold="true" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><simple-value><![CDATA[结算周期]]></simple-value></cell><cell expand="None" name="J1" row="1" col="10"><cell-style font-size="12" forecolor="0,0,0" font-family="宋体" bgcolor="204,204,204" bold="true" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><simple-value><![CDATA[结算周期]]></simple-value></cell><cell expand="None" name="K1" row="1" col="11"><cell-style font-size="12" forecolor="0,0,0" font-family="宋体" bgcolor="204,204,204" bold="false" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><simple-value><![CDATA[回款日期]]></simple-value></cell><cell expand="None" name="L1" row="1" col="12"><cell-style font-size="12" forecolor="0,0,0" font-family="宋体" bgcolor="204,204,204" bold="false" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><simple-value><![CDATA[备注]]></simple-value></cell><cell expand="Down" name="A2" row="2" col="1"><cell-style font-size="9" forecolor="0,0,0" font-family="宋体" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><dataset-value dataset-name="full_test_invoice_item" aggregate="group" property="project_name" order="none" mapping-type="simple"></dataset-value></cell><cell expand="Down" name="B2" row="2" col="2"><cell-style font-size="9" forecolor="0,0,0" font-family="宋体" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><dataset-value dataset-name="full_test_invoice_item" aggregate="group" property="invoice_no" order="none" mapping-type="simple"></dataset-value></cell><cell expand="Down" name="C2" row="2" col="3"><cell-style font-size="9" forecolor="0,0,0" font-family="宋体" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><dataset-value dataset-name="full_test_invoice_item" aggregate="group" property="salerOfficeName" order="none" mapping-type="simple"></dataset-value></cell><cell expand="Down" name="D2" row="2" col="4"><cell-style font-size="9" forecolor="0,0,0" font-family="宋体" format="yyyy-MM-dd" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><dataset-value dataset-name="full_test_invoice_item" aggregate="group" property="update_date" order="none" mapping-type="simple"></dataset-value></cell><cell expand="Down" name="E2" row="2" col="5"><cell-style font-size="9" forecolor="0,0,0" font-family="宋体" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><dataset-value dataset-name="full_test_invoice_item" aggregate="group" property="invoice_no" order="none" mapping-type="simple"></dataset-value></cell><cell expand="Down" name="F2" row="2" col="6"><cell-style font-size="9" forecolor="0,0,0" font-family="宋体" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><dataset-value dataset-name="full_test_invoice_item" aggregate="group" property="customer_name" order="none" mapping-type="simple"></dataset-value></cell><cell expand="Down" name="G2" row="2" col="7"><cell-style font-size="9" forecolor="0,0,0" font-family="宋体" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><dataset-value dataset-name="full_test_invoice_item" aggregate="group" property="content" order="none" mapping-type="simple"></dataset-value></cell><cell expand="Down" name="H2" row="2" col="8"><cell-style font-size="9" forecolor="0,0,0" font-family="宋体" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><dataset-value dataset-name="full_test_invoice_item" aggregate="group" property="amount" order="none" mapping-type="simple"></dataset-value></cell><cell expand="Down" name="I2" row="2" col="9"><cell-style font-size="9" forecolor="0,0,0" font-family="宋体" format="yyyy-MM-dd" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><dataset-value dataset-name="full_test_invoice_item" aggregate="group" property="settlement_begin" order="none" mapping-type="simple"></dataset-value><condition-property-item name="hide" col-width="0"><cell-style for-condition="true" font-size="0" font-family=""></cell-style></condition-property-item></cell><cell expand="Down" name="J2" row="2" col="10"><cell-style font-size="9" forecolor="0,0,0" font-family="宋体" format="yyyy-MM-dd" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><dataset-value dataset-name="full_test_invoice_item" aggregate="group" property="settlement_end" order="none" mapping-type="simple"></dataset-value></cell><cell expand="Down" name="K2" row="2" col="11"><cell-style font-size="9" forecolor="0,0,0" font-family="宋体" format="yyyy-MM-dd" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><dataset-value dataset-name="full_test_invoice_item" aggregate="group" property="return_date" order="none" mapping-type="simple"></dataset-value></cell><cell expand="Down" name="L2" row="2" col="12"><cell-style font-size="9" forecolor="0,0,0" font-family="宋体" align="center" valign="middle"><left-border width="1" style="solid" color="0,0,0"/><right-border width="1" style="solid" color="0,0,0"/><top-border width="1" style="solid" color="0,0,0"/><bottom-border width="1" style="solid" color="0,0,0"/></cell-style><dataset-value dataset-name="full_test_invoice_item" aggregate="group" property="remarks" order="none" mapping-type="simple"></dataset-value></cell><row row-number="1" height="19" band="title"/><row row-number="2" height="18"/><column col-number="1" width="185"/><column col-number="2" width="128"/><column col-number="3" width="100"/><column col-number="4" width="74"/><column col-number="5" width="74"/><column col-number="6" width="74"/><column col-number="7" width="74"/><column col-number="8" width="74"/><column col-number="9" width="74"/><column col-number="10" width="74"/><column col-number="11" width="74"/><column col-number="12" width="74"/><datasource name="内置数据源" type="buildin"><dataset name="db_user" type="sql"><sql><![CDATA[select * from sys_user where mobile is not null or mobile !='']]></sql><field name="id"/><field name="company_id"/><field name="office_id"/><field name="login_name"/><field name="password"/><field name="no"/><field name="name"/><field name="email"/><field name="phone"/><field name="mobile"/><field name="user_type"/><field name="photo"/><field name="login_ip"/><field name="login_date"/><field name="login_flag"/><field name="create_by"/><field name="create_date"/><field name="update_by"/><field name="update_date"/><field name="remarks"/><field name="del_flag"/></dataset><dataset name="db_office" type="sql"><sql><![CDATA[select * from sys_office]]></sql><field name="id"/><field name="parent_id"/><field name="parent_ids"/><field name="name"/><field name="sort"/><field name="area_id"/><field name="code"/><field name="type"/><field name="grade"/><field name="address"/><field name="zip_code"/><field name="master"/><field name="phone"/><field name="fax"/><field name="email"/><field name="USEABLE"/><field name="PRIMARY_PERSON"/><field name="DEPUTY_PERSON"/><field name="create_by"/><field name="create_date"/><field name="update_by"/><field name="update_date"/><field name="remarks"/><field name="del_flag"/></dataset><dataset name="db_apply" type="sql"><sql><![CDATA[select * from project_apply_external where del_flag = '0']]></sql><field name="id"/><field name="project_code"/><field name="project_name"/><field name="saler_id"/><field name="customer_id"/><field name="customer_contact_id"/><field name="estimated_contract_amount"/><field name="estimated_gross_profit_margin"/><field name="estimated_time_of_signing"/><field name="category"/><field name="description"/><field name="estimated_gross_profit_margin_description"/><field name="risk_analysis"/><field name="document_attachment_path"/><field name="create_by"/><field name="create_date"/><field name="update_by"/><field name="update_date"/><field name="remarks"/><field name="del_flag"/><field name="process_status"/><field name="proc_ins_id"/><field name="ownership"/><field name="pro_main_stage"/><field name="pro_stage"/><field name="supplier"/><field name="apply_flag"/><field name="bidding_flag"/><field name="contract_flag"/><field name="finish_flag"/><field name="outsourcing"/><field name="docPath"/><field name="big_category"/><field name="self_dev"/><field name="begin_date"/><field name="end_date"/><field name="project_manager_id"/><field name="project_members"/><field name="pattern"/><field name="target"/><field name="analysis"/><field name="resource"/><field name="end_flag"/></dataset><dataset name="db_contract" type="sql"><sql><![CDATA[${"select * from project_contract where del_flag =\'0\'"+ (emptyparam("contractCode")==false ? "and contract_code=:contractCode" : "")}]]></sql><field name="id"/><field name="project_id"/><field name="stage"/><field name="create_by"/><field name="create_date"/><field name="update_by"/><field name="update_date"/><field name="remarks"/><field name="del_flag"/><field name="proc_ins_id"/><field name="proc_status"/><field name="project_manager_id"/><field name="attachment"/><field name="contract_name"/><field name="contract_code"/><field name="client_name"/><field name="amount"/><field name="amount_detail"/><field name="content_summary"/><field name="begin_date"/><field name="end_date"/><field name="valid_info"/><field name="resign_flag"/><field name="resign_info"/><field name="payment_type"/><field name="purchase_code"/><field name="supplier_name"/><field name="profit_margin"/><field name="delivery_date"/><field name="delivery_address"/><field name="oa_no"/><field name="seal_type"/><field name="contract_type"/><field name="origin_code"/><field name="audit_end_date"/><field name="handle_flag"/><field name="sale_code"/><parameter name="contractCode" type="String" default-value=""/></dataset><dataset name="db_invoice_item" type="sql"><sql><![CDATA[select * from project_invoice_item where del_flag = '0']]></sql><field name="id"/><field name="project_id"/><field name="invoice_id"/><field name="contract_id"/><field name="contract_item_id"/><field name="invoice_type"/><field name="goods_name"/><field name="spec"/><field name="num"/><field name="price"/><field name="amount"/><field name="cost_amount"/><field name="attachment"/><field name="remarks"/><field name="del_flag"/><field name="return_date"/><field name="return_amount"/><field name="client_name"/><field name="content"/><field name="settlement"/><field name="settlement_begin"/><field name="settlement_end"/><field name="unit"/><field name="profit"/><field name="invoice_no"/><field name="create_by"/><field name="create_date"/><field name="update_by"/><field name="update_date"/><field name="proc_ins_id"/><field name="proc_status"/><field name="ver"/><field name="p_id"/><field name="reason"/><field name="invalid"/><field name="customer_invoice_id"/></dataset><dataset name="full_test_invoice_item" type="sql"><sql><![CDATA[${
"SELECT " +
"	a.project_id, " +
"	a.invoice_id, " +
"	a.contract_id, " +
"	a.customer_invoice_id, " +
"	apply.project_name, " +
"	apply.project_code, " +
"	apply.category, " +
"	apply.estimated_contract_amount, " +
"	apply.estimated_gross_profit_margin, " +
"	contract.contract_name, " +
"	contract.contract_code, " +
"	contract.client_name, " +
"	ci.customer_name, " +
"	a.invoice_type, " +
"	a.goods_name, " +
"	a.spec, " +
"	a.num, " +
"	a.price, " +
"	a.amount, " +
"	a.cost_amount, " +
"	a.attachment, " +
"	a.return_date, " +
"	a.return_amount, " +
"	a.content, " +
"	a.settlement_begin, " +
"	a.settlement_end, " +
"	a.unit, " +
"	a.profit, " +
"	a.invoice_no, " +
"	a.ver, " +
"	a.p_id, " +
"	a.reason, " +
"	a.invalid, " +
"	u4.NAME AS salerName, " +
"	u4.login_name AS salerLoginName, " +
"	s5.NAME AS salerOfficeName, " +
"	a.id, " +
"	a.create_by, " +
"	a.create_date, " +
"	a.update_by, " +
"	a.update_date, " +
"	a.remarks, " +
"	a.del_flag, " +
"	a.proc_ins_id, " +
"	a.proc_status  " +
"FROM " +
"	project_invoice_item a " +
"	LEFT JOIN project_invoice b ON b.id = a.invoice_id " +
"	LEFT JOIN project_apply_external apply ON apply.id = a.project_id " +
"	LEFT JOIN project_contract contract ON contract.id = a.contract_id " +
"	LEFT JOIN customer_invoice ci ON ci.id = a.customer_invoice_id " +
"	LEFT JOIN sys_user u4 ON u4.id = apply.saler_id " +
"	LEFT JOIN sys_office s5 ON s5.id = u4.office_id  " +
"WHERE " +
"	a.del_flag = \'0\'  " +
"	AND a.invalid = \'0\'  " +

(emptyparam("pc")==false ? "and apply.project_code like concat(\'%\', :pc, \'%\')" : "") +
(emptyparam("pn")==false ? "and apply.project_name like concat(\'%\', :pn, \'%\')" : "") +
(emptyparam("cc")==false ? "and contract.contract_code like concat(\'%\', :cc, \'%\')" : "") +

(emptyparam("qb")==false && emptyparam("qe")==false  ? "and a.update_date BETWEEN :qb AND :qe" : "") +
(emptyparam("qb")==true && emptyparam("qe")==false  ? "and a.update_date <= :qe" : "") +
(emptyparam("qb")==false && emptyparam("qe")==true  ? "and a.update_date >= :qb" : "") +

" ORDER BY " +
"	a.update_date"
 }]]></sql><field name="project_id"/><field name="invoice_id"/><field name="contract_id"/><field name="customer_invoice_id"/><field name="project_name"/><field name="project_code"/><field name="category"/><field name="estimated_contract_amount"/><field name="estimated_gross_profit_margin"/><field name="contract_name"/><field name="contract_code"/><field name="client_name"/><field name="customer_name"/><field name="invoice_type"/><field name="goods_name"/><field name="spec"/><field name="num"/><field name="price"/><field name="amount"/><field name="cost_amount"/><field name="attachment"/><field name="return_date"/><field name="return_amount"/><field name="content"/><field name="settlement_begin"/><field name="settlement_end"/><field name="unit"/><field name="profit"/><field name="invoice_no"/><field name="ver"/><field name="p_id"/><field name="reason"/><field name="invalid"/><field name="salerName"/><field name="salerLoginName"/><field name="salerOfficeName"/><field name="id"/><field name="create_by"/><field name="create_date"/><field name="update_by"/><field name="update_date"/><field name="remarks"/><field name="del_flag"/><field name="proc_ins_id"/><field name="proc_status"/><parameter name="pc" type="String" default-value=""/><parameter name="pn" type="String" default-value=""/><parameter name="cc" type="String" default-value=""/><parameter name="qb" type="Date" default-value=""/><parameter name="qe" type="Date" default-value=""/></dataset></datasource><datasource name="bean数据源" type="spring" bean="projectInvoiceService"><dataset name="user1" type="bean" method="buildReport" clazz="com.thinkgem.jeesite.modules.sys.entity.User"><field name="admin"/><field name="company"/><field name="createBy"/><field name="createDate"/><field name="currentUser"/><field name="dbName"/><field name="delFlag"/><field name="email"/><field name="global"/><field name="id"/><field name="isNewRecord"/><field name="loginDate"/><field name="loginFlag"/><field name="loginIp"/><field name="loginName"/><field name="mobile"/><field name="name"/><field name="newPassword"/><field name="no"/><field name="office"/><field name="oldLoginDate"/><field name="oldLoginIp"/><field name="oldLoginName"/><field name="page"/><field name="password"/><field name="phone"/><field name="photo"/><field name="remarks"/><field name="role"/><field name="roleIdList"/><field name="roleList"/><field name="roleNames"/><field name="sqlMap"/><field name="updateBy"/><field name="updateDate"/><field name="userType"/></dataset><dataset name="userMap" type="bean" method="loadReport" clazz=""><field name="id"/><field name="name"/><field name="salary"/></dataset></datasource><datasource name="InvoiceItem" type="spring" bean="projectInvoiceService"><dataset name="item" type="bean" method="loadAllInvoiceItem" clazz="com.thinkgem.jeesite.modules.project.entity.invoice.ProjectInvoiceItem"><field name="amount"/><field name="apply"/><field name="attachment"/><field name="clientName"/><field name="content"/><field name="contract"/><field name="contractItem"/><field name="costAmount"/><field name="createBy"/><field name="createDate"/><field name="currentUser"/><field name="customerInvoice"/><field name="dbName"/><field name="delFlag"/><field name="func"/><field name="global"/><field name="goodsName"/><field name="id"/><field name="invalid"/><field name="invoice"/><field name="invoiceNo"/><field name="invoiceType"/><field name="isNewRecord"/><field name="num"/><field name="pId"/><field name="page"/><field name="price"/><field name="procStatus"/><field name="profit"/><field name="reason"/><field name="remarks"/><field name="returnAmount"/><field name="returnDate"/><field name="saler"/><field name="settlement"/><field name="settlementBegin"/><field name="settlementEnd"/><field name="spec"/><field name="sqlMap"/><field name="unit"/><field name="updateBy"/><field name="updateDate"/><field name="ver"/><field name="verNum"/></dataset></datasource><paper type="A4" left-margin="90" right-margin="90"
    top-margin="72" bottom-margin="72" paging-mode="fitpage" fixrows="0"
    width="595" height="842" orientation="portrait" html-report-align="left" bg-image="" html-interval-refresh-value="0" column-enabled="false"></paper><search-form form-position="up"/></ureport>